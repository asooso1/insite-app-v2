openapi: 3.0.3
info:
  title: Insite App API
  description: HDC 인사이트 시설관리 모바일 앱 API
  version: 2.0.0
servers:
  - url: http://121.133.17.22:8083
    description: Development Server
  - url: https://stage.hdc-insite.com:8083
    description: Staging Server
  - url: https://www.hdc-insite.com:8083
    description: Production Server

tags:
  - name: account
    description: 계정 관리
  - name: devices
    description: 기기 관리
  - name: workOrder
    description: 작업지시 관리
  - name: patrol
    description: 순찰점검 관리 (NFC Round)
  - name: personal
    description: 일상업무 관리
  - name: complain
    description: 고객불편 관리
  - name: facility
    description: 설비정보 관리
  - name: tasks
    description: 승인/확인 업무 관리

paths:
  /m/api/account/login:
    post:
      tags:
        - account
      summary: 일반 로그인
      description: 사용자 ID와 비밀번호로 로그인
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/account/temporary:
    post:
      tags:
        - account
      summary: 게스트 로그인
      description: 휴대폰 번호와 빌딩 ID로 임시 계정 로그인
      operationId: guestLogin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GuestLoginRequest'
      responses:
        '200':
          description: 게스트 로그인 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/account/logout:
    post:
      tags:
        - account
      summary: 로그아웃
      description: 현재 세션 종료 및 FCM 토큰 제거
      operationId: logout
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 로그아웃 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/account/password:
    put:
      tags:
        - account
      summary: 비밀번호 변경
      description: 현재 비밀번호 확인 후 새 비밀번호로 변경
      operationId: changePassword
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
      responses:
        '200':
          description: 비밀번호 변경 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청 (현재 비밀번호 불일치 등)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/devices/disconnect:
    post:
      tags:
        - devices
      summary: 기기 해제
      description: 등록된 기기 연결 해제
      operationId: disconnectDevice
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 기기 해제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/devices/registration/events:
    get:
      tags:
        - devices
      summary: 기기 등록 이벤트 스트림
      description: SSE를 통한 실시간 기기 등록 이벤트 수신
      operationId: getRegistrationEvents
      security:
        - bearerAuth: []
      responses:
        '200':
          description: SSE 스트림 연결 성공
          content:
            text/event-stream:
              schema:
                type: string
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/workOrderList:
    get:
      tags:
        - workOrder
      summary: 작업지시 목록 조회
      description: 작업지시 목록을 조회합니다
      operationId: getWorkOrderList
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
        - name: state
          in: query
          description: 작업지시 상태 필터
          schema:
            type: string
            enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
        - name: searchKeyword
          in: query
          description: 검색 키워드 (작업명, 설명 등)
          schema:
            type: string
        - name: termDateFrom
          in: query
          description: 시작일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: termDateTo
          in: query
          description: 종료일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
      responses:
        '200':
          description: 작업지시 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrderListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/orderView/view/{workorderId}:
    get:
      tags:
        - workOrder
      summary: 작업지시 상세 조회
      description: 특정 작업지시의 상세 정보를 조회합니다
      operationId: getWorkOrderDetail
      security:
        - bearerAuth: []
      parameters:
        - name: workorderId
          in: path
          required: true
          description: 작업지시 ID
          schema:
            type: integer
      responses:
        '200':
          description: 작업지시 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrderDetailResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 작업지시를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/issueWorkOrder/{workorderId}:
    put:
      tags:
        - workOrder
      summary: 작업지시 발행
      description: 작업지시를 발행 상태로 변경합니다
      operationId: issueWorkOrder
      security:
        - bearerAuth: []
      parameters:
        - name: workorderId
          in: path
          required: true
          description: 작업지시 ID
          schema:
            type: integer
      responses:
        '200':
          description: 작업지시 발행 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 작업지시를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/addOrder/v2:
    post:
      tags:
        - workOrder
      summary: 작업지시 등록
      description: 새로운 작업지시를 등록합니다
      operationId: createWorkOrder
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateWorkOrderRequest'
      responses:
        '200':
          description: 작업지시 등록 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateWorkOrderResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/addWorkOrderResult/v2:
    post:
      tags:
        - workOrder
      summary: 작업 결과 등록
      description: 작업 결과 및 첨부 파일을 등록합니다
      operationId: addWorkOrderResult
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkOrderResultRequest'
      responses:
        '200':
          description: 작업 결과 등록 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/{nfcRoundId}:
    get:
      tags:
        - patrol
      summary: 순찰점검 상세 조회
      description: 특정 순찰점검의 상세 정보를 조회합니다
      operationId: getPatrolDetail
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: path
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
      responses:
        '200':
          description: 순찰점검 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatrolDetailResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 순찰점검을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/targets:
    get:
      tags:
        - patrol
      summary: 순찰 대상 조회
      description: 순찰점검의 층별 구역 목록을 조회합니다
      operationId: getPatrolTargets
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: query
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
      responses:
        '200':
          description: 순찰 대상 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatrolTargetsResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/items:
    get:
      tags:
        - patrol
      summary: 순찰 점검 항목 조회
      description: 특정 구역의 점검 항목 목록을 조회합니다
      operationId: getPatrolItems
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: query
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
        - name: buildingFloorZoneId
          in: query
          required: true
          description: 건물 구역 ID
          schema:
            type: integer
      responses:
        '200':
          description: 점검 항목 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatrolItemsResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/result:
    get:
      tags:
        - patrol
      summary: 순찰 점검 결과 조회
      description: 특정 구역의 점검 결과를 조회합니다
      operationId: getPatrolResult
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: query
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
        - name: buildingFloorZoneId
          in: query
          required: true
          description: 건물 구역 ID
          schema:
            type: integer
      responses:
        '200':
          description: 점검 결과 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatrolResultResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      tags:
        - patrol
      summary: 순찰 점검 결과 저장
      description: 순찰 점검 결과 및 첨부 이미지를 저장합니다
      operationId: savePatrolResult
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SavePatrolResultRequest'
      responses:
        '200':
          description: 점검 결과 저장 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      tags:
        - patrol
      summary: 순찰 점검 결과 수정
      description: 기존 순찰 점검 결과를 수정합니다
      operationId: updatePatrolResult
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SavePatrolResultRequest'
      responses:
        '200':
          description: 점검 결과 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/state:
    put:
      tags:
        - patrol
      summary: 구역 상태 변경
      description: 순찰 구역의 상태를 변경합니다 (ISSUE → PROCESSING)
      operationId: updatePatrolZoneState
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePatrolZoneStateRequest'
      responses:
        '200':
          description: 상태 변경 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/request-complete/{nfcRoundId}:
    post:
      tags:
        - patrol
      summary: 순찰 완료 요청
      description: 순찰점검 완료를 요청합니다
      operationId: requestCompletePatrol
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: path
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
      responses:
        '200':
          description: 완료 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 요청 (미완료 구역 존재 등)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/nfc-round/not-possible/{nfcRoundId}:
    get:
      tags:
        - patrol
      summary: 조치불가 항목 조회
      description: 순찰점검 중 조치 불가로 처리된 항목 목록을 조회합니다
      operationId: getNotPossiblePatrolResults
      security:
        - bearerAuth: []
      parameters:
        - name: nfcRoundId
          in: path
          required: true
          description: 순찰점검 ID
          schema:
            type: integer
      responses:
        '200':
          description: 조치불가 항목 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotPossiblePatrolResultsResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ==================== 일상업무 (Personal Task) ====================

  /m/api/personal/work-order:
    get:
      tags:
        - personal
      summary: 일상업무 목록 조회
      description: 일상업무 목록을 페이징과 필터로 조회합니다
      operationId: getPersonalWorkOrderList
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
        - name: termDateFrom
          in: query
          description: 시작일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: termDateTo
          in: query
          description: 종료일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: teamId
          in: query
          description: 팀 ID 필터
          schema:
            type: integer
        - name: accountId
          in: query
          description: 담당자 ID 필터
          schema:
            type: integer
      responses:
        '200':
          description: 일상업무 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalWorkOrderListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      tags:
        - personal
      summary: 일상업무 등록/수정/확인
      description: type 파라미터에 따라 일상업무를 등록, 수정, 확인합니다
      operationId: managePersonalWorkOrder
      security:
        - bearerAuth: []
      parameters:
        - name: type
          in: query
          required: true
          description: 작업 유형
          schema:
            type: string
            enum: [create, update, confirm]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/CreatePersonalWorkOrderRequest'
                - $ref: '#/components/schemas/UpdatePersonalWorkOrderRequest'
                - $ref: '#/components/schemas/ConfirmPersonalWorkOrderRequest'
      responses:
        '200':
          description: 작업 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalWorkOrderResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/personal/work-order/{id}:
    get:
      tags:
        - personal
      summary: 일상업무 상세 조회
      description: 특정 일상업무의 상세 정보를 조회합니다
      operationId: getPersonalWorkOrderDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 일상업무 ID
          schema:
            type: integer
      responses:
        '200':
          description: 일상업무 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalWorkOrderDetailResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 일상업무를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ==================== 고객불편 (User Claim) ====================

  /m/api/workOrder/complainList:
    get:
      tags:
        - complain
      summary: 고객불편 목록 조회
      description: 고객불편 목록을 조회합니다
      operationId: getComplainList
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
        - name: state
          in: query
          description: 상태 필터
          schema:
            type: string
            enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
        - name: searchKeyword
          in: query
          description: 검색 키워드
          schema:
            type: string
        - name: termDateFrom
          in: query
          description: 시작일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: termDateTo
          in: query
          description: 종료일 (YYYY-MM-DD)
          schema:
            type: string
            format: date
      responses:
        '200':
          description: 고객불편 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplainListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/addComplain:
    post:
      tags:
        - complain
      summary: 고객불편 등록
      description: 새로운 고객불편을 등록합니다
      operationId: addComplain
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AddComplainRequest'
      responses:
        '200':
          description: 고객불편 등록 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddComplainResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/workOrder/viewComplain/{id}:
    get:
      tags:
        - complain
      summary: 고객불편 상세 조회
      description: 특정 고객불편의 상세 정보를 조회합니다
      operationId: getComplainDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 고객불편 ID
          schema:
            type: integer
      responses:
        '200':
          description: 고객불편 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplainDetailResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 고객불편을 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ==================== 설비정보 (Facility) ====================

  /m/api/facility/facilityList:
    get:
      tags:
        - facility
      summary: 설비 목록 조회
      description: 설비 목록을 조회합니다
      operationId: getFacilityList
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
        - name: firstCategoryId
          in: query
          description: 1차 카테고리 ID
          schema:
            type: integer
        - name: secondCategoryId
          in: query
          description: 2차 카테고리 ID
          schema:
            type: integer
        - name: thirdCategoryId
          in: query
          description: 3차 카테고리 ID
          schema:
            type: integer
        - name: searchKeyword
          in: query
          description: 검색 키워드 (설비명, 설비코드)
          schema:
            type: string
      responses:
        '200':
          description: 설비 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/open/facilityCategory/firstFacilityCategoryList:
    get:
      tags:
        - facility
      summary: 1차 설비 카테고리 목록
      description: 1차 설비 카테고리 목록을 조회합니다
      operationId: getFirstFacilityCategories
      security:
        - bearerAuth: []
      parameters:
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
      responses:
        '200':
          description: 1차 카테고리 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCategoryListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/open/facilityCategory/secondFacilityCategoryList/{firstCategoryId}:
    get:
      tags:
        - facility
      summary: 2차 설비 카테고리 목록
      description: 1차 카테고리에 속한 2차 설비 카테고리 목록을 조회합니다
      operationId: getSecondFacilityCategories
      security:
        - bearerAuth: []
      parameters:
        - name: firstCategoryId
          in: path
          required: true
          description: 1차 카테고리 ID
          schema:
            type: integer
      responses:
        '200':
          description: 2차 카테고리 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCategoryListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/open/facilityCategory/thirdFacilityCategoryList/{secondCategoryId}:
    get:
      tags:
        - facility
      summary: 3차 설비 카테고리 목록
      description: 2차 카테고리에 속한 3차 설비 카테고리 목록을 조회합니다
      operationId: getThirdFacilityCategories
      security:
        - bearerAuth: []
      parameters:
        - name: secondCategoryId
          in: path
          required: true
          description: 2차 카테고리 ID
          schema:
            type: integer
      responses:
        '200':
          description: 3차 카테고리 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCategoryListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/facility/workOrderList:
    get:
      tags:
        - facility
      summary: 설비별 업무 이력 조회
      description: 특정 설비의 작업지시 이력을 조회합니다
      operationId: getFacilityWorkOrderHistory
      security:
        - bearerAuth: []
      parameters:
        - name: facilityId
          in: query
          required: true
          description: 설비 ID
          schema:
            type: integer
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: 설비 업무 이력 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityWorkOrderHistoryResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ==================== 승인/확인 (Tasks) ====================

  /m/api/tasks:
    get:
      tags:
        - tasks
      summary: 업무 목록 조회
      description: type에 따라 승인/확인 대기, 내 업무, 지연 업무 목록을 조회합니다
      operationId: getTaskList
      security:
        - bearerAuth: []
      parameters:
        - name: type
          in: query
          required: true
          description: 조회 유형
          schema:
            type: string
            enum: [confirm, own, delayed]
        - name: page
          in: query
          description: 페이지 번호 (0부터 시작)
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
      responses:
        '200':
          description: 업무 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskListResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/tasks/confirm:
    post:
      tags:
        - tasks
      summary: 일괄 확인/승인
      description: 선택된 업무를 일괄 확인/승인 처리합니다
      operationId: bulkConfirmTasks
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkConfirmTasksRequest'
      responses:
        '200':
          description: 일괄 확인/승인 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkConfirmTasksResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /m/api/tasks/count:
    get:
      tags:
        - tasks
      summary: 업무 건수 조회
      description: 승인 대기, 내 업무, 지연 업무의 건수를 조회합니다
      operationId: getTaskCount
      security:
        - bearerAuth: []
      parameters:
        - name: buildingId
          in: query
          required: true
          description: 빌딩 ID
          schema:
            type: integer
      responses:
        '200':
          description: 업무 건수 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskCountResponse'
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    LoginRequest:
      type: object
      required:
        - userId
        - passwd
      properties:
        userId:
          type: string
          description: 사용자 ID
          example: test@hdc.com
        passwd:
          type: string
          description: 비밀번호
          example: password123
        fcmToken:
          type: string
          description: FCM 푸시 토큰 (선택)
          example: fcm_token_example

    GuestLoginRequest:
      type: object
      required:
        - mobile
        - buildingId
      properties:
        mobile:
          type: string
          description: 휴대폰 번호
          example: '01012345678'
        buildingId:
          type: string
          description: 빌딩 ID
          example: BLDG001
        fcmToken:
          type: string
          description: FCM 푸시 토큰 (선택)
          example: fcm_token_example

    ChangePasswordRequest:
      type: object
      required:
        - currentPassword
        - newPassword
      properties:
        currentPassword:
          type: string
          description: 현재 비밀번호
          example: oldPassword123
        newPassword:
          type: string
          description: 새 비밀번호 (8자 이상, 영문+숫자 포함)
          example: newPassword456

    LoginResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum:
            - success
            - fail
            - MOBILE_DUPLICATE
          description: 응답 코드
          example: success
        message:
          type: string
          description: 응답 메시지
          example: 로그인 성공
        authToken:
          type: string
          description: 인증 토큰 (JWT)
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        data:
          $ref: '#/components/schemas/UserInfo'

    UserInfo:
      type: object
      required:
        - id
        - userId
        - name
        - role
      properties:
        id:
          type: string
          description: 사용자 고유 ID
          example: USER001
        userId:
          type: string
          description: 사용자 로그인 ID
          example: test@hdc.com
        name:
          type: string
          description: 사용자 이름
          example: 홍길동
        email:
          type: string
          description: 이메일 주소
          example: test@hdc.com
        role:
          type: string
          description: 사용자 역할
          example: MANAGER
        siteId:
          type: string
          description: 소속 사이트 ID
          example: SITE001
        siteName:
          type: string
          description: 소속 사이트 이름
          example: HDC현대산업개발
        buildingId:
          type: string
          description: 소속 빌딩 ID
          example: BLDG001
        buildingName:
          type: string
          description: 소속 빌딩 이름
          example: 아이파크몰
        mobile:
          type: string
          description: 휴대폰 번호
          example: '01012345678'

    SuccessResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          example: success
        message:
          type: string
          example: 성공

    ErrorResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          example: error
        message:
          type: string
          example: 오류가 발생했습니다
        details:
          type: object
          additionalProperties: true
          description: 추가 오류 정보

    WorkOrderDTO:
      type: object
      required:
        - id
        - name
        - state
        - stateName
      properties:
        id:
          type: integer
          description: 작업지시 ID
          example: 12345
        name:
          type: string
          description: 작업지시명
          example: 냉방기 점검
        description:
          type: string
          description: 작업 설명
          example: 1층 냉방기 정기 점검
        state:
          type: string
          enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
          description: |
            작업지시 상태
            - WRITE: 작성중
            - ISSUE: 발행
            - PROCESSING: 진행중
            - REQ_COMPLETE: 완료요청
            - COMPLETE: 완료
            - CANCEL: 취소
          example: ISSUE
        stateName:
          type: string
          description: 상태 한글명
          example: 발행
        firstClassName:
          type: string
          description: 1차 분류명
          example: 설비
        secondClassName:
          type: string
          description: 2차 분류명
          example: 냉방
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        planStartDate:
          type: string
          format: date-time
          description: 계획 시작일시
          example: '2026-02-10T09:00:00'
        planEndDate:
          type: string
          format: date-time
          description: 계획 종료일시
          example: '2026-02-10T18:00:00'
        writeDate:
          type: string
          format: date-time
          description: 작성일시
          example: '2026-02-08T14:30:00'
        writerName:
          type: string
          description: 작성자명
          example: 홍길동
        itemSize:
          type: integer
          description: 작업 항목 개수
          example: 5

    WorkOrderListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/WorkOrderDTO'
              description: 작업지시 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 100
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 5
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    WorkOrderDetailDTO:
      allOf:
        - $ref: '#/components/schemas/WorkOrderDTO'
        - type: object
          properties:
            location:
              type: string
              description: 작업 위치
              example: 1층 로비
            managerName:
              type: string
              description: 담당자명
              example: 김철수
            managerPhone:
              type: string
              description: 담당자 연락처
              example: '01098765432'
            items:
              type: array
              items:
                $ref: '#/components/schemas/WorkOrderItemDTO'
              description: 작업 항목 목록
            attachments:
              type: array
              items:
                $ref: '#/components/schemas/AttachmentDTO'
              description: 첨부 파일 목록
            results:
              type: array
              items:
                $ref: '#/components/schemas/WorkOrderResultDTO'
              description: 작업 결과 목록

    WorkOrderItemDTO:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          description: 작업 항목 ID
          example: 1
        name:
          type: string
          description: 작업 항목명
          example: 필터 청소
        description:
          type: string
          description: 항목 설명
          example: 에어 필터 분리 및 청소
        completed:
          type: boolean
          description: 완료 여부
          example: false

    AttachmentDTO:
      type: object
      required:
        - id
        - fileName
        - fileUrl
      properties:
        id:
          type: integer
          description: 첨부 파일 ID
          example: 1
        fileName:
          type: string
          description: 파일명
          example: image_001.jpg
        fileUrl:
          type: string
          description: 파일 URL
          example: /uploads/files/image_001.jpg
        fileSize:
          type: integer
          description: 파일 크기 (bytes)
          example: 1024000
        uploadDate:
          type: string
          format: date-time
          description: 업로드 일시
          example: '2026-02-08T14:30:00'

    WorkOrderResultDTO:
      type: object
      required:
        - id
        - content
        - writer
        - writeDate
      properties:
        id:
          type: integer
          description: 작업 결과 ID
          example: 1
        content:
          type: string
          description: 작업 결과 내용
          example: 필터 청소 완료
        writer:
          type: string
          description: 작성자명
          example: 김철수
        writeDate:
          type: string
          format: date-time
          description: 작성일시
          example: '2026-02-10T16:30:00'
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentDTO'
          description: 첨부 파일 목록

    WorkOrderDetailResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            workOrderDTO:
              $ref: '#/components/schemas/WorkOrderDetailDTO'

    CreateWorkOrderRequest:
      type: object
      required:
        - name
        - firstClassId
        - secondClassId
        - planStartDate
        - planEndDate
        - buildingId
        - chargeAccountIds
      properties:
        name:
          type: string
          description: 작업지시명
          example: 냉방기 정기 점검
        description:
          type: string
          description: 작업 설명
          example: 1층 냉방기 필터 청소 및 점검
        firstClassId:
          type: integer
          description: 대분류 ID
          example: 1
        secondClassId:
          type: integer
          description: 소분류 ID
          example: 11
        planStartDate:
          type: string
          format: date
          description: 계획 시작일 (YYYY-MM-DD)
          example: '2026-02-10'
        planEndDate:
          type: string
          format: date
          description: 계획 종료일 (YYYY-MM-DD)
          example: '2026-02-12'
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        chargeAccountIds:
          type: array
          items:
            type: integer
          description: 담당자 ID 목록
          example: [101, 102]
        approveAccountIds:
          type: array
          items:
            type: integer
          description: 승인자 ID 목록 (선택)
          example: [104]
        files:
          type: array
          items:
            type: string
            format: binary
          description: 첨부 파일 목록 (선택)

    CreateWorkOrderResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 작업지시가 등록되었습니다
        data:
          type: object
          properties:
            workorderId:
              type: integer
              description: 생성된 작업지시 ID
              example: 12345

    WorkOrderResultRequest:
      type: object
      required:
        - workOrderId
        - content
      properties:
        workOrderId:
          type: integer
          description: 작업지시 ID
          example: 12345
        content:
          type: string
          description: 작업 결과 내용
          example: 냉방기 점검 완료. 이상 없음.
        attachmentIds:
          type: array
          items:
            type: integer
          description: 첨부 파일 ID 목록
          example: [1, 2, 3]

    # ==================== 순찰점검 (Patrol) 스키마 ====================

    PatrolDetailDTO:
      type: object
      required:
        - nfcRoundId
        - buildingId
        - buildingName
        - state
      properties:
        nfcRoundId:
          type: integer
          description: 순찰점검 ID
          example: 1001
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        state:
          type: string
          enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE]
          description: |
            순찰점검 상태
            - WRITE: 작성중
            - ISSUE: 발행
            - PROCESSING: 진행중
            - REQ_COMPLETE: 완료요청
            - COMPLETE: 완료
          example: PROCESSING
        roundName:
          type: string
          description: 순찰명
          example: 야간 순찰
        startDate:
          type: string
          format: date-time
          description: 시작일시
          example: '2026-02-10T22:00:00'
        endDate:
          type: string
          format: date-time
          description: 종료일시
          example: '2026-02-11T06:00:00'

    PatrolDetailResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          $ref: '#/components/schemas/PatrolDetailDTO'

    PatrolFloorDTO:
      type: object
      required:
        - buildingFloorId
        - buildingFloorName
        - nfcRoundTargetDTOS
      properties:
        buildingFloorId:
          type: integer
          description: 층 ID
          example: 10
        buildingFloorName:
          type: string
          description: 층 이름
          example: 1층
        nfcRoundTargetDTOS:
          type: array
          items:
            $ref: '#/components/schemas/PatrolZoneDTO'
          description: 해당 층의 구역 목록

    PatrolZoneDTO:
      type: object
      required:
        - buildingFloorZoneId
        - buildingFloorZoneName
        - isCompleted
      properties:
        buildingFloorZoneId:
          type: integer
          description: 구역 ID
          example: 101
        buildingFloorZoneName:
          type: string
          description: 구역 이름
          example: 로비
        isCompleted:
          type: boolean
          description: 점검 완료 여부
          example: false
        nfcRoundId:
          type: integer
          description: 순찰점검 ID
          example: 1001

    PatrolTargetsResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: array
          items:
            $ref: '#/components/schemas/PatrolFloorDTO'
          description: 층별 구역 목록

    PatrolItemDTO:
      type: object
      required:
        - nfcRoundItemId
        - itemName
        - categoryItemId
        - type
      properties:
        nfcRoundItemId:
          type: integer
          description: 점검 항목 ID
          example: 5001
        itemName:
          type: string
          description: 항목 이름
          example: 비상구 점검
        categoryItemId:
          type: integer
          description: 카테고리 항목 ID
          example: 201
        type:
          type: string
          description: 항목 유형
          example: SAFETY
        description:
          type: string
          description: 항목 설명
          example: 비상구 출입문 개폐 확인

    PatrolItemsResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: array
          items:
            $ref: '#/components/schemas/PatrolItemDTO'
          description: 점검 항목 목록

    PatrolResultImageDTO:
      type: object
      required:
        - imageUrl
      properties:
        nfcRoundResultImageId:
          type: integer
          description: 이미지 ID
          example: 3001
        imageUrl:
          type: string
          description: 이미지 URL
          example: /uploads/patrol/image_001.jpg

    PatrolResultItemDTO:
      type: object
      required:
        - nfcRoundResultId
        - nfcRoundItemId
        - actionType
      properties:
        nfcRoundResultId:
          type: integer
          description: 점검 결과 ID
          example: 2001
        nfcRoundItemId:
          type: integer
          description: 점검 항목 ID
          example: 5001
        nfcRoundItemDTO:
          $ref: '#/components/schemas/PatrolItemDTO'
        actionType:
          type: string
          enum: [NONE, ON_SITE, NOT_POSSIBLE]
          description: |
            조치 유형
            - NONE: 양호 (조치 불필요)
            - ON_SITE: 현장 조치 완료
            - NOT_POSSIBLE: 조치 불가
          example: ON_SITE
        actionTaken:
          type: string
          description: 조치 내용 또는 조치 불가 사유
          example: 비상구 개폐 확인 완료
        images:
          type: array
          items:
            $ref: '#/components/schemas/PatrolResultImageDTO'
          description: 첨부 이미지 목록 (조치불가 시)
        buildingFloorName:
          type: string
          description: 층 이름
          example: 1층
        buildingFloorZoneName:
          type: string
          description: 구역 이름
          example: 로비

    PatrolResultResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: array
          items:
            $ref: '#/components/schemas/PatrolResultItemDTO'
          description: 점검 결과 목록

    SavePatrolResultRequest:
      type: object
      required:
        - nfcRoundId
        - buildingFloorZoneId
        - results
      properties:
        nfcRoundId:
          type: integer
          description: 순찰점검 ID
          example: 1001
        buildingFloorZoneId:
          type: integer
          description: 구역 ID
          example: 101
        results:
          type: string
          description: 점검 결과 JSON 문자열 (배열)
          example: '[{"nfcRoundItemId":5001,"actionType":"ON_SITE","actionTaken":"정상"}]'
        images:
          type: array
          items:
            type: string
            format: binary
          description: 첨부 이미지 파일 목록 (조치불가 항목용)
        deleteImageIds:
          type: string
          description: 삭제할 이미지 ID 목록 (JSON 배열 문자열, 수정 시)
          example: '[3001, 3002]'

    UpdatePatrolZoneStateRequest:
      type: object
      required:
        - nfcRoundId
        - buildingFloorZoneId
      properties:
        nfcRoundId:
          type: integer
          description: 순찰점검 ID
          example: 1001
        buildingFloorZoneId:
          type: integer
          description: 구역 ID
          example: 101

    NotPossiblePatrolResultsResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: array
          items:
            $ref: '#/components/schemas/PatrolResultItemDTO'
          description: 조치불가 항목 목록

    # ==================== 일상업무 (Personal Task) 스키마 ====================

    PersonalWorkOrderDTO:
      type: object
      required:
        - id
        - taskName
        - taskDate
        - accountName
      properties:
        id:
          type: integer
          description: 일상업무 ID
          example: 1001
        taskName:
          type: string
          description: 업무명
          example: 일일 점검
        taskDate:
          type: string
          format: date
          description: 업무 날짜
          example: '2026-02-10'
        accountName:
          type: string
          description: 담당자명
          example: 홍길동
        teamName:
          type: string
          description: 팀명
          example: 시설관리팀
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        state:
          type: string
          enum: [PENDING, COMPLETED, CONFIRMED]
          description: |
            상태
            - PENDING: 대기
            - COMPLETED: 완료
            - CONFIRMED: 확인
          example: COMPLETED
        stateName:
          type: string
          description: 상태 한글명
          example: 완료

    PersonalWorkOrderListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/PersonalWorkOrderDTO'
              description: 일상업무 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 50
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 3
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    PersonalWorkOrderDetailDTO:
      allOf:
        - $ref: '#/components/schemas/PersonalWorkOrderDTO'
        - type: object
          properties:
            description:
              type: string
              description: 업무 설명
              example: 냉난방 설비 일일 점검
            location:
              type: string
              description: 업무 위치
              example: B1층 기계실
            startTime:
              type: string
              format: time
              description: 시작 시간
              example: '09:00'
            endTime:
              type: string
              format: time
              description: 종료 시간
              example: '10:00'
            completedTime:
              type: string
              format: date-time
              description: 완료 시간
              example: '2026-02-10T09:45:00'
            confirmedBy:
              type: string
              description: 확인자명
              example: 김부장
            confirmedTime:
              type: string
              format: date-time
              description: 확인 시간
              example: '2026-02-10T11:00:00'
            result:
              type: string
              description: 작업 결과
              example: 모든 설비 정상 작동 확인
            attachments:
              type: array
              items:
                $ref: '#/components/schemas/AttachmentDTO'
              description: 첨부 파일 목록

    PersonalWorkOrderDetailResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          $ref: '#/components/schemas/PersonalWorkOrderDetailDTO'

    CreatePersonalWorkOrderRequest:
      type: object
      required:
        - taskName
        - taskDate
        - accountId
        - buildingId
      properties:
        taskName:
          type: string
          description: 업무명
          example: 일일 설비 점검
        description:
          type: string
          description: 업무 설명
          example: 냉난방 설비 일일 점검
        taskDate:
          type: string
          format: date
          description: 업무 날짜 (YYYY-MM-DD)
          example: '2026-02-10'
        startTime:
          type: string
          format: time
          description: 시작 시간 (HH:mm)
          example: '09:00'
        endTime:
          type: string
          format: time
          description: 종료 시간 (HH:mm)
          example: '10:00'
        accountId:
          type: integer
          description: 담당자 ID
          example: 101
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        location:
          type: string
          description: 업무 위치
          example: B1층 기계실

    UpdatePersonalWorkOrderRequest:
      type: object
      required:
        - id
      properties:
        id:
          type: integer
          description: 일상업무 ID
          example: 1001
        result:
          type: string
          description: 작업 결과
          example: 모든 설비 정상 작동 확인
        state:
          type: string
          enum: [PENDING, COMPLETED]
          description: 상태 (COMPLETED로 변경 시 완료 처리)
          example: COMPLETED
        attachmentIds:
          type: array
          items:
            type: integer
          description: 첨부 파일 ID 목록
          example: [1, 2, 3]

    ConfirmPersonalWorkOrderRequest:
      type: object
      required:
        - ids
      properties:
        ids:
          type: array
          items:
            type: integer
          description: 확인할 일상업무 ID 목록
          example: [1001, 1002, 1003]
        confirmNote:
          type: string
          description: 확인 메모
          example: 정상 처리 확인

    PersonalWorkOrderResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 작업이 완료되었습니다
        data:
          type: object
          properties:
            id:
              type: integer
              description: 생성/수정된 일상업무 ID
              example: 1001

    # ==================== 고객불편 (User Claim) 스키마 ====================

    ComplainDTO:
      type: object
      required:
        - id
        - title
        - state
        - stateName
      properties:
        id:
          type: integer
          description: 고객불편 ID
          example: 2001
        title:
          type: string
          description: 제목
          example: 냉방 불량
        description:
          type: string
          description: 내용
          example: 1층 로비 냉방이 약합니다
        state:
          type: string
          enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
          description: |
            상태
            - WRITE: 작성중
            - ISSUE: 접수
            - PROCESSING: 진행중
            - REQ_COMPLETE: 완료요청
            - COMPLETE: 완료
            - CANCEL: 취소
          example: PROCESSING
        stateName:
          type: string
          description: 상태 한글명
          example: 진행중
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        location:
          type: string
          description: 위치
          example: 1층 로비
        reporterName:
          type: string
          description: 신고자명
          example: 김고객
        reporterPhone:
          type: string
          description: 신고자 연락처
          example: '01012345678'
        writeDate:
          type: string
          format: date-time
          description: 접수일시
          example: '2026-02-09T14:30:00'
        completedDate:
          type: string
          format: date-time
          description: 완료일시
          example: '2026-02-10T16:00:00'
        managerName:
          type: string
          description: 담당자명
          example: 김관리

    ComplainListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/ComplainDTO'
              description: 고객불편 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 30
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 2
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    ComplainDetailDTO:
      allOf:
        - $ref: '#/components/schemas/ComplainDTO'
        - type: object
          properties:
            categoryName:
              type: string
              description: 분류명
              example: 설비 > 냉방
            attachments:
              type: array
              items:
                $ref: '#/components/schemas/AttachmentDTO'
              description: 첨부 파일 목록
            results:
              type: array
              items:
                $ref: '#/components/schemas/ComplainResultDTO'
              description: 처리 결과 목록

    ComplainResultDTO:
      type: object
      required:
        - id
        - content
        - writer
        - writeDate
      properties:
        id:
          type: integer
          description: 처리 결과 ID
          example: 3001
        content:
          type: string
          description: 처리 내용
          example: 냉방기 가스 충전 완료
        writer:
          type: string
          description: 작성자명
          example: 김관리
        writeDate:
          type: string
          format: date-time
          description: 작성일시
          example: '2026-02-10T15:30:00'
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentDTO'
          description: 첨부 파일 목록

    ComplainDetailResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          $ref: '#/components/schemas/ComplainDetailDTO'

    AddComplainRequest:
      type: object
      required:
        - title
        - buildingId
        - reporterName
        - reporterPhone
      properties:
        title:
          type: string
          description: 제목
          example: 냉방 불량
        description:
          type: string
          description: 내용
          example: 1층 로비 냉방이 약합니다
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        location:
          type: string
          description: 위치
          example: 1층 로비
        reporterName:
          type: string
          description: 신고자명
          example: 김고객
        reporterPhone:
          type: string
          description: 신고자 연락처
          example: '01012345678'
        categoryId:
          type: integer
          description: 분류 ID
          example: 11
        files:
          type: array
          items:
            type: string
            format: binary
          description: 첨부 파일 목록 (선택)

    AddComplainResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 고객불편이 접수되었습니다
        data:
          type: object
          properties:
            complainId:
              type: integer
              description: 생성된 고객불편 ID
              example: 2001

    # ==================== 설비정보 (Facility) 스키마 ====================

    FacilityDTO:
      type: object
      required:
        - id
        - facilityName
        - facilityCode
      properties:
        id:
          type: integer
          description: 설비 ID
          example: 5001
        facilityName:
          type: string
          description: 설비명
          example: 냉방기 #1
        facilityCode:
          type: string
          description: 설비 코드
          example: AC-B1-001
        buildingId:
          type: integer
          description: 빌딩 ID
          example: 1
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        location:
          type: string
          description: 설치 위치
          example: B1층 기계실
        firstCategoryName:
          type: string
          description: 1차 분류명
          example: 냉난방설비
        secondCategoryName:
          type: string
          description: 2차 분류명
          example: 냉방기
        thirdCategoryName:
          type: string
          description: 3차 분류명
          example: 수냉식
        manufacturer:
          type: string
          description: 제조사
          example: 삼성전자
        modelName:
          type: string
          description: 모델명
          example: AH-123-XYZ
        installDate:
          type: string
          format: date
          description: 설치일
          example: '2020-01-15'
        warrantyDate:
          type: string
          format: date
          description: 보증 만료일
          example: '2025-01-14'

    FacilityListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/FacilityDTO'
              description: 설비 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 150
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 8
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    FacilityCategoryDTO:
      type: object
      required:
        - id
        - categoryName
      properties:
        id:
          type: integer
          description: 카테고리 ID
          example: 10
        categoryName:
          type: string
          description: 카테고리명
          example: 냉난방설비
        categoryCode:
          type: string
          description: 카테고리 코드
          example: CAT-001
        orderIndex:
          type: integer
          description: 정렬 순서
          example: 1

    FacilityCategoryListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: array
          items:
            $ref: '#/components/schemas/FacilityCategoryDTO'
          description: 카테고리 목록

    FacilityWorkOrderHistoryDTO:
      type: object
      required:
        - workorderId
        - workorderName
        - state
        - writeDate
      properties:
        workorderId:
          type: integer
          description: 작업지시 ID
          example: 12345
        workorderName:
          type: string
          description: 작업지시명
          example: 냉방기 정기 점검
        state:
          type: string
          enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
          description: 상태
          example: COMPLETE
        stateName:
          type: string
          description: 상태 한글명
          example: 완료
        writeDate:
          type: string
          format: date-time
          description: 작성일시
          example: '2026-02-01T10:00:00'
        completedDate:
          type: string
          format: date-time
          description: 완료일시
          example: '2026-02-02T14:30:00'
        managerName:
          type: string
          description: 담당자명
          example: 김관리

    FacilityWorkOrderHistoryResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/FacilityWorkOrderHistoryDTO'
              description: 작업지시 이력 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 25
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 2
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    # ==================== 승인/확인 (Tasks) 스키마 ====================

    TaskDTO:
      type: object
      required:
        - id
        - type
        - name
        - state
      properties:
        id:
          type: integer
          description: 업무 ID
          example: 10001
        type:
          type: string
          enum: [WORK_ORDER, PATROL, PERSONAL, COMPLAIN]
          description: |
            업무 유형
            - WORK_ORDER: 작업지시
            - PATROL: 순찰점검
            - PERSONAL: 일상업무
            - COMPLAIN: 고객불편
          example: WORK_ORDER
        typeName:
          type: string
          description: 업무 유형 한글명
          example: 작업지시
        name:
          type: string
          description: 업무명
          example: 냉방기 정기 점검
        state:
          type: string
          enum: [WRITE, ISSUE, PROCESSING, REQ_COMPLETE, COMPLETE, CANCEL]
          description: 상태
          example: REQ_COMPLETE
        stateName:
          type: string
          description: 상태 한글명
          example: 완료요청
        buildingName:
          type: string
          description: 빌딩명
          example: 아이파크몰
        managerName:
          type: string
          description: 담당자명
          example: 김관리
        planStartDate:
          type: string
          format: date-time
          description: 계획 시작일시
          example: '2026-02-10T09:00:00'
        planEndDate:
          type: string
          format: date-time
          description: 계획 종료일시
          example: '2026-02-10T18:00:00'
        writeDate:
          type: string
          format: date-time
          description: 작성일시
          example: '2026-02-08T14:30:00'
        isDelayed:
          type: boolean
          description: 지연 여부
          example: false

    TaskListResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/TaskDTO'
              description: 업무 목록
            totalElements:
              type: integer
              description: 전체 데이터 개수
              example: 45
            totalPages:
              type: integer
              description: 전체 페이지 수
              example: 3
            pageNumber:
              type: integer
              description: 현재 페이지 번호 (0부터 시작)
              example: 0

    BulkConfirmTasksRequest:
      type: object
      required:
        - tasks
      properties:
        tasks:
          type: array
          items:
            $ref: '#/components/schemas/TaskConfirmItem'
          description: 확인/승인할 업무 목록
        confirmNote:
          type: string
          description: 확인 메모
          example: 모두 정상 처리 확인

    TaskConfirmItem:
      type: object
      required:
        - id
        - type
      properties:
        id:
          type: integer
          description: 업무 ID
          example: 10001
        type:
          type: string
          enum: [WORK_ORDER, PATROL, PERSONAL, COMPLAIN]
          description: 업무 유형
          example: WORK_ORDER

    BulkConfirmTasksResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum: [success, fail, partial]
          example: success
        message:
          type: string
          example: 5건이 확인되었습니다
        data:
          type: object
          properties:
            successCount:
              type: integer
              description: 성공 건수
              example: 5
            failCount:
              type: integer
              description: 실패 건수
              example: 0
            failedItems:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: integer
                    description: 실패한 업무 ID
                    example: 10003
                  reason:
                    type: string
                    description: 실패 사유
                    example: 권한이 없습니다
              description: 실패한 항목 목록

    TaskCountDTO:
      type: object
      required:
        - confirmCount
        - ownCount
        - delayedCount
      properties:
        confirmCount:
          type: integer
          description: 승인/확인 대기 건수
          example: 12
        ownCount:
          type: integer
          description: 내 업무 건수
          example: 35
        delayedCount:
          type: integer
          description: 지연 업무 건수
          example: 3

    TaskCountResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          enum: [success, fail]
          example: success
        message:
          type: string
          example: 조회 성공
        data:
          $ref: '#/components/schemas/TaskCountDTO'
